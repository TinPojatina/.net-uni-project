@if (Model != null && Model.Any())
{
    <ul class="list-group">
        @foreach (var book in Model)
        {
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>@book?.Title</span>
                <button class="btn btn-primary btn-sm" onclick="showBorrowModal(@book?.Id ?? 0)">Borrow</button>
            </li>
        }
    </ul>
}
else
{
    <p class="text-muted">No books found.</p>
}

<script>
    function showBorrowModal(bookId) {
        if (!bookId || bookId === 0) {
            alert("Invalid book selection.");
            return;
        }

        $.get("/Books/BorrowBook", { id: bookId }, function (data) {
            if (data) {
                $("body").append(data);
                $("#borrowBookModal").modal("show");
            } else {
                alert("Failed to load borrow modal.");
            }
        }).fail(function () {
            alert("Error fetching book details.");
        });
    }
</script>
